<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¯Ú©ØªØ±Ù Ø±ÙØ¨Ø§ØªÛŒÚ© â€” ØºØ±Ø¨Ø§Ù„Ú¯Ø±ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¯ÛŒØ§Ø¨Øª</title>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-gradient-light: linear-gradient(135deg, #f0f4ff 0%, #f9fafc 100%);
            --bg-gradient-dark: linear-gradient(135deg, #070e1a 0%, #0f172a 100%);
            --card-bg: #ffffff;
            --text: #2d3748;
            --text-light: #718096;
            --primary: #4361ee;
            --primary-dark: #3a56d4;
            --danger: #e53e3e;
            --warning: #f59e0b; 
            --success: #38a169;
            --border: #e2e8f0;
            --shadow: 0 6px 16px rgba(0,0,0,0.06);
            --shadow-hover: 0 8px 20px rgba(0,0,0,0.08);
        }
        
        [data-theme="dark"] {
            --card-bg: #1e293b;
            --text: #e2e8f0;
            --text-light: #94a3b8;
            --border: #334155;
            --shadow: 0 6px 16px rgba(0,0,0,0.2);
            --shadow-hover: 0 8px 24px rgba(0,0,0,0.3);
            --bg-gradient-light: var(--bg-gradient-dark);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: var(--bg-gradient-light);
            background-attachment: fixed;
            color: var(--text);
            font-family: 'Vazirmatn', Tahoma, sans-serif;
            padding: 20px;
            transition: background 0.6s ease, color 0.4s ease;
            line-height: 1.6;
        }
        
        .logo-header {
            text-align: center;
            margin-bottom: 24px;
        }

        .logo-header h1 {
            font-size: 2.4rem;
            font-weight: 700;
            margin-bottom: 8px;
            background: linear-gradient(90deg, var(--primary), #7209b7);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .subtitle {
            color: var(--text-light);
            font-size: 1.15rem;
            margin-bottom: 20px;
        }

        .info-note {
            background: rgba(74, 107, 255, 0.06);
            border-right: 4px solid var(--primary);
            padding: 16px 20px;
            border-radius: 10px;
            font-size: 0.98rem;
            margin-bottom: 26px;
            color: var(--text-light);
            line-height: 1.6;
        }
        
        [data-theme="dark"] .info-note {
            background: rgba(94, 96, 206, 0.12);
        }
        
        html[dir="ltr"] .info-note {
            border-right: none;
            border-left: 4px solid var(--primary);
        }

        .container {
            max-width: 720px;
            margin: 0 auto;
        }

        .card {
            background: var(--card-bg);
            border-radius: 18px;
            padding: 32px;
            box-shadow: var(--shadow);
            margin-bottom: 28px;
            transition: all 0.3s ease;
            border: 1px solid var(--border);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
        }

        .form-group {
            margin-bottom: 22px;
        }

        .form-row {
            display: flex;
            gap: 20px;
        }
        
        .form-row .form-group {
            width: 50%;
        }

        label {
            display: flex; 
            align-items: center; 
            gap: 8px; 
            margin-bottom: 10px;
            font-weight: 600;
            font-size: 1.02rem;
            color: var(--text);
        }
        

        .tooltip-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--border);
            color: var(--text-light);
            font-weight: 700;
            font-size: 0.8rem;
            cursor: help;
        }
        
        [data-theme="dark"] .tooltip-icon {
            background: var(--text-light);
            color: var(--card-bg);
        }


        input {
            width: 100%;
            padding: 15px 18px;
            border: 2px solid var(--border);
            border-radius: 12px;
            font-size: 1.05rem;
            background: var(--card-bg);
            color: var(--text);
            transition: all 0.3s;
            font-family: inherit;
        }

        input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }

    
        .button-group {
            display: flex;
            gap: 16px;
            margin-top: 10px;
        }

        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 18px;
            width: 100%;
            font-size: 1.2rem;
            font-weight: 700;
            border-radius: 14px;
            cursor: pointer;
            transition: all 0.3s;
            font-family: inherit;
            letter-spacing: -0.5px;
            box-shadow: var(--shadow);
        }

        .btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        
        .btn-secondary {
            background: var(--border);
            color: var(--text-light);
            width: 40%;
            font-size: 1.1rem;
            box-shadow: none;
        }
        
        .btn-secondary:hover {
            background: #d1d9e6;
            color: var(--text);
            transform: translateY(-2px);
        }
        
        [data-theme="dark"] .btn-secondary {
            background: var(--border);
            color: var(--text-light);
        }
        
        [data-theme="dark"] .btn-secondary:hover {
            background: #475569;
            color: var(--text);
        }


        .result-box {
            padding: 28px;
            border-radius: 18px;
            text-align: center;
            font-size: 1.1rem; 
            font-weight: 500; 
            display: none;
            animation: popIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 2px solid transparent;
            line-height: 1.7;
        }
        
        
        .result-box .percentage {
            font-size: 2.2rem;
            font-weight: 700;
            display: block;
            margin-bottom: 8px;
        }
        
        .result-box .result-info {
            margin-top: 16px;
            font-size: 0.95rem;
            font-weight: 400;
            padding-top: 16px;
            border-top: 1px dashed;
        }

        @keyframes popIn {
            0% { transform: scale(0.8); opacity: 0; }
            70% { transform: scale(1.05); }
            100% { transform: scale(1); opacity: 1; }
        }

        
        .result-low {
            background: rgba(56, 161, 105, 0.1);
            color: var(--success);
            border-color: var(--success);
        }
        
        .result-medium {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning);
            border-color: var(--warning);
        }

        .result-high {
            background: rgba(229, 62, 62, 0.1);
            color: var(--danger);
            border-color: var(--danger);
        }
        
        .result-0 { background: rgba(56, 161, 105, 0.1); color: var(--success); border-color: var(--success); }
        .result-1 { background: rgba(229, 62, 62, 0.1); color: var(--danger); border-color: var(--danger); }

        .theme-toggle, .lang-toggle {
            position: fixed;
            top: 24px;
            width: 52px;
            height: 52px;
            border-radius: 50%;
            background: var(--card-bg);
            border: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.4rem;
            box-shadow: var(--shadow);
            z-index: 1000;
            transition: all 0.4s ease;
        }

        .theme-toggle:hover, .lang-toggle:hover {
            transform: rotate(20deg);
        }

        .theme-toggle {
            left: 24px;
        }

        .lang-toggle {
            right: 24px;
        }

        html[dir="ltr"] .theme-toggle {
            left: auto;
            right: 88px;
        }
        
        html[dir="ltr"] .lang-toggle {
            right: auto;
            left: 24px;
        }

        footer {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px dashed var(--border);
            color: var(--text-light);
            font-size: 0.95rem;
        }
        
        
        @media (max-width: 600px) {
            .card { padding: 22px 20px; }
            .logo-header h1 { font-size: 2.0rem; }
            .btn { padding: 16px; font-size: 1.1rem; }
            .theme-toggle, .lang-toggle { width: 48px; height: 48px; font-size: 1.2rem; }
            .form-row { flex-direction: column; gap: 0; } 
            .form-row .form-group { width: 100%; } 
            .button-group { flex-direction: column; }
            .btn-secondary { width: 100%; }
        }
    </style>
</head>
<body>
    <div class="theme-toggle" id="themeToggle" aria-label="ØªØºÛŒÛŒØ± Ø­Ø§Ù„Øª Ø´Ø¨ Ùˆ Ø±ÙˆØ²">
        <span id="themeIcon">ğŸŒ™</span>
    </div>

    <div class="lang-toggle" id="langToggle" aria-label="ØªØºÛŒÛŒØ± Ø²Ø¨Ø§Ù† / Switch language">
        ğŸ‡¬ğŸ‡§ English
    </div>

    <div class="container">
        <header class="logo-header">
            <h1 id="title">Ø¯Ú©ØªØ±Ù Ø±ÙØ¨Ø§ØªÛŒÚ© ğŸ¤–ğŸ©º</h1>
            <p class="subtitle" id="subtitle">ØºØ±Ø¨Ø§Ù„Ú¯Ø±ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¯ÛŒØ§Ø¨Øª â€” Ù…Ø¨ØªÙ†ÛŒ Ø¨Ø± Ù…Ø¯Ù„ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ</p>
        </header>

        <div class="info-note" id="infoNote">
            â„¹ï¸ Ø§ÛŒÙ† Ø§Ø¨Ø²Ø§Ø± ÛŒÚ© <strong>ØºØ±Ø¨Ø§Ù„Ú¯Ø±ÛŒ Ø§ÙˆÙ„ÛŒÙ‡</strong> Ø§Ø³Øª â€” Ù†Ù‡ ØªØ´Ø®ÛŒØµ Ù¾Ø²Ø´Ú©ÛŒ. Â 
            Ù†ØªØ§ÛŒØ¬ØŒ Ú©Ù…Ú©ÛŒ Ø¨Ø±Ø§ÛŒ ØªØµÙ…ÛŒÙ…â€ŒÚ¯ÛŒØ±ÛŒ Ø¯Ø±Ø¨Ø§Ø±Ù‡Ù” Ù…Ø±Ø§Ø¬Ø¹Ù‡ Ø¨Ù‡ Ù…ØªØ®ØµØµ Ù‡Ø³ØªÙ†Ø¯.
        </div>

        <div class="card">
            <div class="form-group">
                <label for="glucose" id="glucoseLabel">Ú¯Ù„ÙˆÚ©Ø² (Glucose)</label>
                <input type="number" id="glucose" placeholder="Ù…Ø«Ø§Ù„: 120" min="0" step="0.1">
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="weight" id="weightLabel">ÙˆØ²Ù† (Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…)</label>
                    <input type="number" id="weight" placeholder="Ù…Ø«Ø§Ù„: 75" min="0" step="0.1">
                </div>
                <div class="form-group">
                    <label for="height" id="heightLabel">Ù‚Ø¯ (Ø³Ø§Ù†ØªÛŒâ€ŒÙ…ØªØ±)</label>
                    <input type="number" id="height" placeholder="Ù…Ø«Ø§Ù„: 170" min="0" step="0.1">
                </div>
            </div>
            
            <div class="form-group">
                <label for="bp" id="bpLabel">ÙØ´Ø§Ø± Ø®ÙˆÙ†
                    <span class="tooltip-icon" id="bpTooltip" title="Ø¹Ø¯Ø¯ Ø¯ÛŒØ§Ø³ØªÙˆÙ„ÛŒÚ© ÛŒØ§ Ù¾Ø§ÛŒÛŒÙ†â€ŒØªØ± Ø¯Ø± Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒÚ¯ÛŒØ±ÛŒ ÙØ´Ø§Ø± Ø®ÙˆÙ† (Ù…Ø«Ø§Ù„: Ø§Ú¯Ø± Û±Û²Û°/Û¸Û° Ø¨Ø§Ø´Ø¯ØŒ Ø¹Ø¯Ø¯ Û¸Û° Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯).">?</span>
                </label>
                <input type="number" id="bp" placeholder="Ù…Ø«Ø§Ù„: 72" min="0" step="0.1">
            </div>
            <div class="form-group">
                <label for="age" id="ageLabel">Ø³Ù† (Age)</label>
                <input type="number" id="age" placeholder="Ù…Ø«Ø§Ù„: 45" min="0" max="120">
            </div>
            <div class="form-group">
                <label for="dpf" id="dpfLabel">Ø³Ø§Ø¨Ù‚Ù‡ Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ
                    <span class="tooltip-icon" id="dpfTooltip" title="Ø¹Ø¯Ø¯ÛŒ Ø¨ÛŒÙ† 0.08 ØªØ§ 2.4 Ú©Ù‡ Ù†Ø´Ø§Ù†â€ŒØ¯Ù‡Ù†Ø¯Ù‡ Ø³Ø§Ø¨Ù‚Ù‡ Ú˜Ù†ØªÛŒÚ©ÛŒ Ø¯ÛŒØ§Ø¨Øª Ø¯Ø± Ø®Ø§Ù†ÙˆØ§Ø¯Ù‡ Ø´Ù…Ø§Ø³Øª.">?</span>
                </label>
                <input type="number" id="dpf" placeholder="Ù…Ø«Ø§Ù„: 0.5" min="0" step="0.001">
            </div>

            <div class="button-group">
                <button class="btn" id="predictBtn">ğŸ” ØºØ±Ø¨Ø§Ù„Ú¯Ø±ÛŒ Ø¯ÛŒØ§Ø¨Øª!</button>
                <button class="btn btn-secondary" id="clearBtn">Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†</button>
            </div>
        </div>

        <div id="resultBox" class="result-box"></div>
    </div>

    <footer id="footer">
        Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡ Ø¨Ø§ â¤ï¸ ØªÙˆØ³Ø· <strong>Ø§Ø¨ÙˆØ§Ù„ÙØ¶Ù„ Ù‚Ø§Ø³Ù…ÛŒ</strong> â€” Ù…Ø¨ØªÙ†ÛŒ Ø¨Ø± Ù…Ø¯Ù„ ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ù…Ø§Ø´ÛŒÙ†
    </footer>

    <script>
    
    const translations = {
        fa: {
            title: "Ø¯Ú©ØªØ±Ù Ø±ÙØ¨Ø§ØªÛŒÚ© ğŸ¤–ğŸ©º",
            subtitle: "ØºØ±Ø¨Ø§Ù„Ú¯Ø±ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¯ÛŒØ§Ø¨Øª â€” Ù…Ø¨ØªÙ†ÛŒ Ø¨Ø± Ù…Ø¯Ù„ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ",
            infoNote: "â„¹ï¸ Ø§ÛŒÙ† Ø§Ø¨Ø²Ø§Ø± ÛŒÚ© <strong>ØºØ±Ø¨Ø§Ù„Ú¯Ø±ÛŒ Ø§ÙˆÙ„ÛŒÙ‡</strong> Ø§Ø³Øª â€” Ù†Ù‡ ØªØ´Ø®ÛŒØµ Ù¾Ø²Ø´Ú©ÛŒ.<br>Ù†ØªØ§ÛŒØ¬ØŒ Ú©Ù…Ú©ÛŒ Ø¨Ø±Ø§ÛŒ ØªØµÙ…ÛŒÙ…â€ŒÚ¯ÛŒØ±ÛŒ Ø¯Ø±Ø¨Ø§Ø±Ù‡Ù” Ù…Ø±Ø§Ø¬Ø¹Ù‡ Ø¨Ù‡ Ù…ØªØ®ØµØµ Ù‡Ø³ØªÙ†Ø¯.",
            glucoseLabel: "Ú¯Ù„ÙˆÚ©Ø² (Glucose)",
            weightLabel: "ÙˆØ²Ù† (Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…)",
            heightLabel: "Ù‚Ø¯ (Ø³Ø§Ù†ØªÛŒâ€ŒÙ…ØªØ±)",
            bpLabel: "ÙØ´Ø§Ø± Ø®ÙˆÙ†",
            bpTooltip: "Ø¹Ø¯Ø¯ Ø¯ÛŒØ§Ø³ØªÙˆÙ„ÛŒÚ© ÛŒØ§ Ù¾Ø§ÛŒÛŒÙ†â€ŒØªØ± Ø¯Ø± Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒÚ¯ÛŒØ±ÛŒ ÙØ´Ø§Ø± Ø®ÙˆÙ† (Ù…Ø«Ø§Ù„: Ø§Ú¯Ø± Û±Û²Û°/Û¸Û° Ø¨Ø§Ø´Ø¯ØŒ Ø¹Ø¯Ø¯ Û¸Û° Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯).",
            ageLabel: "Ø³Ù† (Age)",
            dpfLabel: "Ø³Ø§Ø¨Ù‚Ù‡ Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ",
            dpfTooltip: "Ø¹Ø¯Ø¯ÛŒ Ø¨ÛŒÙ† 0.08 ØªØ§ 2.4 Ú©Ù‡ Ù†Ø´Ø§Ù†â€ŒØ¯Ù‡Ù†Ø¯Ù‡ Ø³Ø§Ø¨Ù‚Ù‡ Ú˜Ù†ØªÛŒÚ©ÛŒ Ø¯ÛŒØ§Ø¨Øª Ø¯Ø± Ø®Ø§Ù†ÙˆØ§Ø¯Ù‡ Ø´Ù…Ø§Ø³Øª.",
            predictBtn: "ğŸ” ØºØ±Ø¨Ø§Ù„Ú¯Ø±ÛŒ Ø¯ÛŒØ§Ø¨Øª!",
            clearBtn: "Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†",
            alertInvalid: "âš ï¸ Ù„Ø·ÙØ§Ù‹ ØªÙ…Ø§Ù…ÛŒ ÙÛŒÙ„Ø¯Ù‡Ø§ Ø±Ø§ Ø¨Ù‡â€ŒØµÙˆØ±Øª Ø¹Ø¯Ø¯ÛŒ Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.",
            alertInvalidHeight: "âš ï¸ Ù‚Ø¯ Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ ØµÙØ± ÛŒØ§ Ù…Ù†ÙÛŒ Ø¨Ø§Ø´Ø¯.",
            langToggleText: "ğŸ‡¬ğŸ‡§ English",
            placeholders: {
                glucose: "Ù…Ø«Ø§Ù„: 120",
                weight: "Ù…Ø«Ø§Ù„: 75",
                height: "Ù…Ø«Ø§Ù„: 170",
                bp: "Ù…Ø«Ø§Ù„: 72",
                age: "Ù…Ø«Ø§Ù„: 45",
                dpf: "Ù…Ø«Ø§Ù„: 0.5"
            },
            resultTitle: "Ø§Ø­ØªÙ…Ø§Ù„ Ø®Ø·Ø± Ø¯ÛŒØ§Ø¨Øª:",
            resultInfoLow: "ÙˆØ¶Ø¹ÛŒØª Ø´Ù…Ø§ Ù…Ø·Ù„ÙˆØ¨ Ø¨Ù‡ Ù†Ø¸Ø± Ù…ÛŒâ€ŒØ±Ø³Ø¯. Ø¨Ø§ Ø§ÛŒÙ† Ø­Ø§Ù„ØŒ Ø³Ù„Ø§Ù…ØªÛŒ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù¾ÛŒØ´Ú¯ÛŒØ±ÛŒ Ø¯Ø§Ø±Ø¯ â€” Ú†Ú©Ø§Ù¾ Ø³Ø§Ù„Ø§Ù†Ù‡ Ø±Ø§ ÙØ±Ø§Ù…ÙˆØ´ Ù†Ú©Ù†ÛŒØ¯.",
            resultInfoMedium: "Ù†ØªÛŒØ¬Ù‡ Ø´Ù…Ø§ Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªÙˆØ¬Ù‡ Ø¯Ø§Ø±Ø¯. ØªÙˆØµÛŒÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ø³Ø¨Ú© Ø²Ù†Ø¯Ú¯ÛŒ Ø³Ø§Ù„Ù…â€ŒØªØ±ÛŒ (ØªØºØ°ÛŒÙ‡ Ùˆ ÙˆØ±Ø²Ø´) Ø¯Ø± Ù¾ÛŒØ´ Ø¨Ú¯ÛŒØ±ÛŒØ¯ Ùˆ Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ù‚ÛŒÙ‚â€ŒØªØ± Ø¨Ø§ Ù¾Ø²Ø´Ú© Ù…Ø´ÙˆØ±Øª Ú©Ù†ÛŒØ¯.",
            resultInfoHigh: "Ø®Ø·Ø± Ø¨Ø§Ù„Ø§ Ø§Ø³Øª. Ø§ÛŒÙ† Ù†ØªÛŒØ¬Ù‡ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ù†Ø¸Ø± Ù¾Ø²Ø´Ú© Ù†ÛŒØ³Øª. Ù„Ø·ÙØ§Ù‹ Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ù‚ÛŒÙ‚ Ùˆ Ø´Ø±ÙˆØ¹ Ø§Ù‚Ø¯Ø§Ù…Ø§Øª Ù„Ø§Ø²Ù…ØŒ (Ø­ØªÙ…Ø§Ù‹) Ø¯Ø± Ø§Ø³Ø±Ø¹ ÙˆÙ‚Øª Ø¨Ù‡ Ù…ØªØ®ØµØµ ØºØ¯Ø¯ Ù…Ø±Ø§Ø¬Ø¹Ù‡ Ú©Ù†ÛŒØ¯.",
            footer: "Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡ Ø¨Ø§ â¤ï¸ ØªÙˆØ³Ø· <strong>Ø§Ø¨ÙˆØ§Ù„ÙØ¶Ù„ Ù‚Ø§Ø³Ù…ÛŒ</strong> â€” Ù…Ø¨ØªÙ†ÛŒ Ø¨Ø± Ù…Ø¯Ù„ ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ù…Ø§Ø´ÛŒÙ†",
        },
        en: {
            title: "Dr. Robotic ğŸ¤–ğŸ©º",
            subtitle: "Smart Diabetes Screening â€” Based on AI Model",
            infoNote: "â„¹ï¸ This tool provides <strong>preliminary screening</strong> â€” not medical diagnosis.<br>Results help you decide whether to consult a specialist.",
            glucoseLabel: "Glucose",
            weightLabel: "Weight (kg)",
            heightLabel: "Height (cm)",
            bpLabel: "Blood Pressure",
            bpTooltip: "The diastolic or lower number in a blood pressure reading (e.g., if your reading is 120/80, enter 80).",
            ageLabel: "Age",
            dpfLabel: "Diabetes Pedigree",
            dpfTooltip: "A number (0.08 to 2.4) representing diabetes genetic history in your family.",
            predictBtn: "ğŸ” Screen for Diabetes!",
            clearBtn: "Clear Form",
            alertInvalid: "âš ï¸ Please fill all fields with valid numbers.",
            alertInvalidHeight: "âš ï¸ Height cannot be zero or negative.",
            langToggleText: "ğŸ‡®ğŸ‡· ÙØ§Ø±Ø³ÛŒ",
            placeholders: {
                glucose: "e.g. 120",
                weight: "e.g. 75",
                height: "e.g. 170",
                bp: "e.g. 72",
                age: "e.g. 45",
                dpf: "e.g. 0.5"
            },
            resultTitle: "Diabetes Risk Probability:",
            resultInfoLow: "Your status appears favorable. However, health requires prevention â€” don't skip your annual check-up.",
            resultInfoMedium: "Your result warrants attention. It's recommended to adopt a healthier lifestyle (diet and exercise) and consult a doctor for a detailed check-up.",
            resultInfoHigh: "High risk detected. This result is NOT a substitute for professional medical advice. Please consult an endocrinologist **as soon as possible** for accurate diagnosis and treatment.",
            footer: "Made with â¤ï¸ by <strong>Abolfazl Ghasemi</strong> â€” Based on Machine Learning Model",
        }
    };
    
    
    const inputIds = ['glucose', 'weight', 'height', 'bp', 'age', 'dpf'];
    
    function initTheme() {
        const themeToggle = document.getElementById('themeToggle');
        const themeIcon = document.getElementById('themeIcon');
        const html = document.documentElement;
        
        const savedTheme = localStorage.getItem('theme');
        const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        let currentTheme = savedTheme || (systemPrefersDark ? 'dark' : 'light');

        function setTheme(theme) {
            if (theme === 'dark') {
                html.setAttribute('data-theme', 'dark');
                themeIcon.textContent = 'â˜€ï¸';
            } else {
                html.removeAttribute('data-theme');
                themeIcon.textContent = 'ğŸŒ™';
            }
            localStorage.setItem('theme', theme);
            currentTheme = theme;
        }

        setTheme(currentTheme);
        themeToggle.addEventListener('click', () => {
            setTheme(currentTheme === 'light' ? 'dark' : 'light');
        });
    }

    
    // Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯Ù† Ù¾Ø§Ø±Ø§Ù…ØªØ± shouldAlert
    function getFormValues(currentLang, shouldAlert = true) {
        const glucose = document.getElementById('glucose').value.trim();
        const weight = document.getElementById('weight').value.trim();
        const height = document.getElementById('height').value.trim();
        const bp = document.getElementById('bp').value.trim();
        const age = document.getElementById('age').value.trim();
        const dpf = document.getElementById('dpf').value.trim();

        // Ø¨Ø±Ø±Ø³ÛŒ Ø®Ø§Ù„ÛŒ Ø¨ÙˆØ¯Ù† Ùˆ Ù…Ø¹ØªØ¨Ø± Ø¨ÙˆØ¯Ù† Ø§Ø¹Ø¯Ø§Ø¯
        if ([glucose, weight, height, bp, age, dpf].some(v => v === '' || isNaN(parseFloat(v)))) {
            if (shouldAlert) {
                alert(translations[currentLang].alertInvalid);
            }
            return null; // Ø¨Ø§Ø²Ú¯Ø´Øª null Ø¯Ø± ØµÙˆØ±Øª Ø®Ø·Ø§ÛŒ ÙˆÙ„ÛŒØ¯ÛŒØ´Ù†
        }
        
        const parsedHeight = parseFloat(height);
        if (parsedHeight <= 0) {
            if (shouldAlert) {
                alert(translations[currentLang].alertInvalidHeight);
            }
            return null;
        }
        
        const parsedWeight = parseFloat(weight);
        const heightInMeters = parsedHeight / 100;
        const bmi = parsedWeight / (heightInMeters * heightInMeters);

        
        // Ø°Ø®ÛŒØ±Ù‡ Ù…Ù‚Ø§Ø¯ÛŒØ± Ù…ÙˆÙÙ‚ Ø¯Ø± Local Storage
        inputIds.forEach(id => {
            localStorage.setItem(`input_${id}_${currentLang}`, document.getElementById(id).value.trim());
        });

        return { 
            glucose: parseFloat(glucose), 
            bmi, 
            bp: parseFloat(bp), 
            age: parseFloat(age), 
            dpf: parseFloat(dpf) 
        };
    }


    function setLanguage(lang) {
        const currentLang = localStorage.getItem('lang') || 'fa';
        const newLang = lang || currentLang;
        
        localStorage.setItem('lang', newLang);
        const t = translations[newLang];

        // ... (Ø¨Ù‚ÛŒÙ‡ Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒâ€ŒÙ‡Ø§ÛŒ Ù…ØªÙ† Ø«Ø§Ø¨Øª) ...
        document.getElementById('title').innerHTML = t.title;
        document.getElementById('subtitle').textContent = t.subtitle;
        document.getElementById('infoNote').innerHTML = t.infoNote;
        document.getElementById('glucoseLabel').textContent = t.glucoseLabel;
        document.getElementById('weightLabel').textContent = t.weightLabel;
        document.getElementById('heightLabel').textContent = t.heightLabel;
        document.getElementById('ageLabel').textContent = t.ageLabel;
        
        const bpTooltip = document.getElementById('bpTooltip');
        const dpfTooltip = document.getElementById('dpfTooltip');
        document.getElementById('bpLabel').innerHTML = t.bpLabel + " " + bpTooltip.outerHTML;
        document.getElementById('dpfLabel').innerHTML = t.dpfLabel + " " + dpfTooltip.outerHTML;
        document.getElementById('bpTooltip').title = t.bpTooltip;
        document.getElementById('dpfTooltip').title = t.dpfTooltip;

        document.getElementById('predictBtn').textContent = t.predictBtn;
        document.getElementById('clearBtn').textContent = t.clearBtn;
        document.getElementById('footer').innerHTML = t.footer;
        document.getElementById('langToggle').innerHTML = t.langToggleText;
        
        let isResultVisible = document.getElementById('resultBox').style.display === 'block';
        let isFormEmpty = true;

        // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ PlaceholderÙ‡Ø§ Ùˆ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ù…Ù‚Ø§Ø¯ÛŒØ±
        inputIds.forEach(id => {
            const input = document.getElementById(id);
            input.placeholder = t.placeholders[id];
            
            // Ø§Ú¯Ø± lang ØªØ¹Ø±ÛŒÙ Ø´Ø¯Ù‡ Ø¨Ø§Ø´Ø¯ØŒ ÛŒØ¹Ù†ÛŒ ØªØºÛŒÛŒØ± Ø²Ø¨Ø§Ù† Ø¯Ø³ØªÛŒ Ø§Ø³Øª (Ø°Ø®ÛŒØ±Ù‡ Ù…Ù‚Ø§Ø¯ÛŒØ± ÙØ¹Ù„ÛŒ Ø¨Ø±Ø§ÛŒ Ø²Ø¨Ø§Ù† Ù‚Ø¨Ù„ÛŒ)
            if (lang && lang !== currentLang) {
                const prevLang = currentLang; 
                const val = document.getElementById(id).value.trim();
                if (val) localStorage.setItem(`input_${id}_${prevLang}`, val);
                else localStorage.removeItem(`input_${id}_${prevLang}`); // Ù…Ù‚Ø§Ø¯ÛŒØ± Ø®Ø§Ù„ÛŒ Ø±Ø§ Ø­Ø°Ù Ú©Ù†
            }
            
            // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ù‚Ø§Ø¯ÛŒØ± Ø¨Ø±Ø§ÛŒ Ø²Ø¨Ø§Ù† Ø¬Ø¯ÛŒØ¯
            const val = localStorage.getItem(`input_${id}_${newLang}`);
            if (val) {
                input.value = val;
                isFormEmpty = false; // Ø­Ø¯Ø§Ù‚Ù„ ÛŒÚ© ÙÛŒÙ„Ø¯ Ù…Ù‚Ø¯Ø§Ø± Ø¯Ø§Ø±Ø¯
            }
            else input.value = '';
        });

        
        document.documentElement.dir = newLang === 'fa' ? 'rtl' : 'ltr';
        document.documentElement.lang = newLang;

        
        const resultBox = document.getElementById('resultBox');
        // Ø§Ú¯Ø± Ù†ØªÛŒØ¬Ù‡â€ŒØ§ÛŒ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´Ø¯:
        if (isResultVisible) {
            // Ø§Ú¯Ø± ÙØ±Ù… Ø§Ú©Ù†ÙˆÙ† Ø®Ø§Ù„ÛŒ Ø§Ø³ØªØŒ Ù†ØªÛŒØ¬Ù‡ Ø±Ø§ Ù¾Ù†Ù‡Ø§Ù† Ú©Ù†.
            if (isFormEmpty) {
                resultBox.style.display = 'none';
                resultBox.innerHTML = '';
            } else {
                // Ø§Ú¯Ø± ÙØ±Ù… Ù…Ù‚Ø¯Ø§Ø±ÛŒ Ø¯Ø§Ø±Ø¯ØŒ ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ ØªØ±Ø¬Ù…Ù‡ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ú©Ù†.
                handlePrediction(false); 
            }
        }
    }


    function handleLangToggle() {
        const currentLang = localStorage.getItem('lang') || 'fa';
        const newLang = currentLang === 'fa' ? 'en' : 'fa';
        
        setLanguage(newLang); // ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒ setLanguage Ú©Ù‡ Ø§Ú©Ù†ÙˆÙ† Ø®ÙˆØ¯ Ø¹Ù…Ù„ÛŒØ§Øª Ø°Ø®ÛŒØ±Ù‡ Ø±Ø§ Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ¯Ù‡Ø¯
    }
    
    
    function validateInputs(inputs, currentLang) {
        // ... (ØªØ§Ø¨Ø¹ ÙˆÙ„ÛŒØ¯ÛŒØ´Ù† Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ± Ø¨Ø§Ù‚ÛŒ Ù…ÛŒâ€ŒÙ…Ø§Ù†Ø¯) ...
        const { glucose, bmi, bp, age, dpf } = inputs;
        const alerts = [];
        const t = translations[currentLang];
        const isFa = currentLang === 'fa';

        if (glucose < 20 || glucose > 600) alerts.push(isFa ? `Ú¯Ù„ÙˆÚ©Ø²: ${glucose} (ØºÛŒØ±Ù…Ø¹Ù…ÙˆÙ„)` : `Glucose: ${glucose} (Unusual)`);
        if (bmi < 10 || bmi > 90) alerts.push(isFa ? `BMI: ${bmi.toFixed(1)} (ØºÛŒØ±Ù…Ø¹Ù…ÙˆÙ„)` : `BMI: ${bmi.toFixed(1)} (Unusual)`);
        if (bp < 10 || bp > 300) alerts.push(isFa ? `ÙØ´Ø§Ø± Ø®ÙˆÙ†: ${bp} (ØºÛŒØ±Ù…Ø¹Ù…ÙˆÙ„)` : `Blood Pressure: ${bp} (Unusual)`);
        if (age < 1 || age > 120) alerts.push(isFa ? `Ø³Ù†: ${age} (ØºÛŒØ±Ù…Ø¹Ù…ÙˆÙ„)` : `Age: ${age} (Unusual)`);
        if (dpf < 0 || dpf > 3) alerts.push(isFa ? `Ø³Ø§Ø¨Ù‚Ù‡ Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ (DPF): ${dpf} (ØºÛŒØ±Ù…Ø¹Ù…ÙˆÙ„)` : `DPF: ${dpf} (Unusual)`);

        if (alerts.length > 0) {
            const title = isFa ? 'âš ï¸ Ù‡Ø´Ø¯Ø§Ø± Ø¨Ø§Ù„ÛŒÙ†ÛŒ' : 'âš ï¸ Clinical Warning';
            const confirmMsg = (isFa ? 'Ù…Ù‚Ø§Ø¯ÛŒØ± ÙˆØ§Ø±Ø¯Ø´Ø¯Ù‡ Ø®Ø§Ø±Ø¬ Ø§Ø² Ù…Ø­Ø¯ÙˆØ¯Ù‡Ù” Ù‚Ø§Ø¨Ù„â€ŒØ§Ù†ØªØ¸Ø§Ø± Ù‡Ø³ØªÙ†Ø¯.\nØ¢ÛŒØ§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø¨Ø§ Ø§ÛŒÙ† Ù…Ù‚Ø§Ø¯ÛŒØ± Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ù‡ÛŒØ¯ØŸ\n\nâ€¢ ' 
                                     : 'Some values are outside plausible ranges.\nDo you want to proceed anyway?\n\nâ€¢ ') 
                             + alerts.join('\nâ€¢ ');

            if (!confirm(`${title}\n\n${confirmMsg}`)) {
                return false; 
            }
        }
        return true; 
    }
    
    function calculateRisk(inputs) {
        // ... (ØªØ§Ø¨Ø¹ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø±ÛŒØ³Ú© Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ± Ø¨Ø§Ù‚ÛŒ Ù…ÛŒâ€ŒÙ…Ø§Ù†Ø¯) ...
        const { glucose, bmi, bp, age, dpf } = inputs;
        const w_glucose = 0.034;
        const w_bmi = 0.088;
        const w_bp = -0.003; 
        const w_age = 0.018;
        const w_dpf = 0.91;
        const bias = -8.45; 
        
        let z = bias +
                (glucose * w_glucose) +
                (bmi * w_bmi) +
                (bp * w_bp) +
                (age * w_age) +
                (dpf * w_dpf);

        
        let probability = 1 / (1 + Math.exp(-z));
        
        return probability;
    }
        
    
    function displayResult(probability, currentLang) {
        // ... (ØªØ§Ø¨Ø¹ Ù†Ù…Ø§ÛŒØ´ Ù†ØªÛŒØ¬Ù‡ Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ± Ø¨Ø§Ù‚ÛŒ Ù…ÛŒâ€ŒÙ…Ø§Ù†Ø¯) ...
        const resultBox = document.getElementById('resultBox');
        const t = translations[currentLang];
        const riskPercent = (probability * 100).toFixed(1);
        
        let riskClass = 'result-low';
        let riskInfo = t.resultInfoLow;

        if (probability >= 0.50) { 
            riskClass = 'result-high';
            riskInfo = t.resultInfoHigh;
        } else if (probability >= 0.20) { 
            riskClass = 'result-medium';
            riskInfo = t.resultInfoMedium;
        }
        
        
        resultBox.innerHTML = `
            ${t.resultTitle}
            <span class="percentage">${riskPercent}%</span>
            <div class="result-info">${riskInfo}</div>
        `;
        
        
        resultBox.className = 'result-box'; 
        resultBox.classList.add(riskClass);
        
        resultBox.style.display = 'block';
    }
    
    
    function handlePrediction(shouldValidate = true) {
        const currentLang = localStorage.getItem('lang') || 'fa';
        
        // shouldAlert Ø±Ø§ Ø¨Ø± Ø§Ø³Ø§Ø³ shouldValidate ØªÙ†Ø¸ÛŒÙ… Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…
        const inputs = getFormValues(currentLang, shouldValidate); 
        
        // Ø§Ú¯Ø± ÙˆÙ„ÛŒØ¯ÛŒØ´Ù† ÙˆØ±ÙˆØ¯ÛŒ Ø§Ù†Ø¬Ø§Ù… Ø´ÙˆØ¯ Ùˆ Ù…ÙˆÙÙ‚ Ù†Ø¨Ø§Ø´Ø¯ØŒ inputs Ø¨Ø±Ø§Ø¨Ø± null Ø®ÙˆØ§Ù‡Ø¯ Ø¨ÙˆØ¯.
        if (!inputs) return;

        
        // ÙˆÙ„ÛŒØ¯ÛŒØ´Ù† Ù…Ø­Ø¯ÙˆØ¯Ù‡ ØºÛŒØ±Ù…Ø¹Ù…ÙˆÙ„ ÙÙ‚Ø· Ø¯Ø± Ø­Ø§Ù„Øª Ú©Ù„ÛŒÚ© Ø¯Ú©Ù…Ù‡ (shouldValidate=true)
        if (shouldValidate) {
            const isValid = validateInputs(inputs, currentLang);
            if (!isValid) return; 
        }

        
        const probability = calculateRisk(inputs);
        
        displayResult(probability, currentLang);
    }
    
    
    function handleClearForm() {
        const currentLang = localStorage.getItem('lang') || 'fa';
        inputIds.forEach(id => {
            document.getElementById(id).value = '';
            // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù‡Ø± Ø¯Ùˆ Ú©Ù„ÛŒØ¯ Ø²Ø¨Ø§Ù†
            localStorage.removeItem(`input_${id}_fa`); 
            localStorage.removeItem(`input_${id}_en`);
        });
        
        const resultBox = document.getElementById('resultBox');
        resultBox.style.display = 'none';
        resultBox.innerHTML = '';
    }
    
    
    function bindEventListeners() {
        // **Ø§ØµÙ„Ø§Ø­: Ù‡Ù†Ú¯Ø§Ù… Ú©Ù„ÛŒÚ© Ø¨Ø± Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ØŒ shouldValidate Ø¨Ø§ÛŒØ¯ TRUE Ø¨Ø§Ø´Ø¯.**
        document.getElementById('predictBtn').addEventListener('click', () => handlePrediction(true));
        document.getElementById('clearBtn').addEventListener('click', handleClearForm);
        document.getElementById('langToggle').addEventListener('click', handleLangToggle);
    }
    

    
    document.addEventListener('DOMContentLoaded', () => {
        initTheme();
        setLanguage(); // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ Ø²Ø¨Ø§Ù† Ùˆ Ù…Ù‚Ø§Ø¯ÛŒØ±
        bindEventListeners();
    });

    </script>
</body>
</html>